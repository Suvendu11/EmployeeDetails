sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment"],function(e,t){"use strict";return e.extend("employeeapp.controller.EmployeeDetails",{onInit:function(){var e=this.getOwnerComponent().getModel();var t=new sap.ui.model.json.JSONModel;this.getView().setModel(t,"empData");var e=new sap.ui.model.json.JSONModel;this.getView().setModel(e,"appModel");var o=this.byId("datePicker");o.addDelegate({onAfterRendering:function(){var e=o.$().find("input");e.prop("disabled",true).css("color","#ccc")}})},handleRefresh:function(e){setTimeout(function(){this.byId("pullToRefresh").hide();var e=this.getView().byId("empdatatable");var t=e.getBinding("items");t.refresh()}.bind(this),1e3)},isButtonEnabled:function(e){console.log(e);return e!=="None"},oncreatenewemployeepress:function(){if(!this.byId("createDialog")){var e=this.getView();t.load({id:e.getId(),name:"employeeapp.fragments.CreatenewEmp",controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("createDialog").open()}},onDeleteEmp:function(e){var t=this.getView().byId("empdatatable");var o=t.getBinding("items");var n=e.getSource().getBindingContext("odataService").getProperty("ID");var i={ID:n};var a="/odata/v4/catalog/DeleteEmployee";var s=this;$.ajax({type:"POST",url:a,dataType:"json",contentType:"application/json",data:JSON.stringify(i),success:function(e){console.log(e);o.refresh()},error:function(e,t,o){console.log("Error")}})},onPressEditEmployee:function(){if(!this.byId("editEmpDialog")){var e=this.getView();t.load({id:e.getId(),name:"employeeapp.fragments.Editnewemployee",controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("editEmpDialog").open()}},onEditEmpDetails:function(){var e=this.getView().byId("empdatatable");var t=e.getBinding("items");var o=this.getView().getModel("empData").getData();var n={ID:parseInt(o.ID),f_name:o.f_name,l_name:o.l_name,dept:o.dept,email:o.email,position:o.position,mob_no:o.mob_no};this.byId("editEmpDialog").close()},onPressSubmitButton:function(){var e=this.getView().byId("empdatatable");var t=e.getBinding("items");var o=this.getView().getModel("empData").getData();var n={f_name:o.f_name,l_name:o.l_name,dept:o.dept,email:o.email,position:o.position,mob_no:o.mob_no};var i=this.getOwnerComponent().getModel("odataService");var a=i.bindList("/CreateEmployee");a.create(n);this.byId("createDialog").close()},reademployees:function(){var e=[];var t=this;var o=this.getOwnerComponent().getModel("odataService").bindList("/Employees");o.requestContexts().then(function(o){o.forEach(t=>{e.push(t.getObject())});t.getView().getModel("appModel").setProperty("/Employees",e)})},onCloseDialog:function(){this.byId("createDialog").close()},onCloseEditDialog:function(){this.byId("editEmpDialog").close()}})});