sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/Fragment"],function(e,t){"use strict";return e.extend("employeeapp.controller.EmployeeDetails",{onInit:function(){var e=this.getOwnerComponent().getModel();var t=new sap.ui.model.json.JSONModel;this.getView().setModel(t,"empData");var o=this.byId("datePicker");o.addDelegate({onAfterRendering:function(){var e=o.$().find("input");e.prop("disabled",true).css("color","#ccc")}})},readEmployeeList:function(){var e=new sap.ui.model.json.JSONModel;this.getView().setModel(e,"appModel");var t=this.getModel("odataService").bindList("/Employee",undefined,undefined,undefined);t.getContexts();t.attachEventOnce("change",function(e){var o=t.getContexts(),n=o.map(function(e){return e.getObject()});this.getModel("appModel").setProperty("/EmployeeList",n)}.bind(this))},isButtonEnabled:function(e){console.log(e);return e!=="None"},oncreatenewemployeepress:function(){if(!this.byId("createDialog")){var e=this.getView();t.load({id:e.getId(),name:"employeeapp.fragments.CreatenewEmp",controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("createDialog").open()}},onDeleteEmp:function(e){var t=this.getView().byId("empdatatable");var o=t.getBinding("items");var n=e.getSource().getBindingContext("odataService").getProperty("ID");var a={ID:n};var i="/odata/v4/catalog/DeleteEmployee";var r=this;$.ajax({type:"POST",url:i,dataType:"json",contentType:"application/json",data:JSON.stringify(a),success:function(e){console.log(e);o.refresh()},error:function(e,t,o){console.log("Error")}})},onPressEditEmployee:function(){if(!this.byId("editEmpDialog")){var e=this.getView();t.load({id:e.getId(),name:"employeeapp.fragments.Editnewemployee",controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("editEmpDialog").open()}},onEditEmpDetails:function(){var e=this.getView().byId("empdatatable");var t=e.getBinding("items");var o=this.getView().getModel("empData").getData();var n={ID:parseInt(o.ID),f_name:o.f_name,l_name:o.l_name,dept:o.dept,email:o.email,position:o.position,mob_no:o.mob_no};var a="/odata/v4/catalog/UpdateEmployee";var i=this;$.ajax({type:"POST",url:a,dataType:"json",contentType:"application/json",data:JSON.stringify(n),success:function(e){t.refresh();console.log(e)},error:function(e,t,o){console.log("Error")}});this.byId("editEmpDialog").close()},onPressSubmitButton:function(){var e=this.getView().byId("empdatatable");var t=e.getBinding("items");var o=this.getView().getModel("empData").getData();var n={f_name:o.f_name,l_name:o.l_name,dept:o.dept,email:o.email,position:o.position,mob_no:o.mob_no};var a="/odata/v4/catalog/CreateEmployee";var i=this;$.ajax({type:"POST",url:a,dataType:"json",contentType:"application/json",data:JSON.stringify(n),success:function(e){t.refresh();console.log(e)},error:function(e,t,o){console.log("Error")}});this.byId("createDialog").close()},createnewemployee:function(){var e=this.getView().getModel();e.read("/Employees",{success:function(e,t){console.log(e)},error:function(e){}});var t={f_name:"frgth",l_name:"cdfv",dept:"MCA"};e.create("/CreateEmployee",{method:"POST",urlParameters:t,success:function(e,t){console.log("Employee created successfully:",e)},error:function(e){console.error("Error creating employee:",e)}})},onCloseDialog:function(){this.byId("createDialog").close()},onCloseEditDialog:function(){this.byId("editEmpDialog").close()}})});